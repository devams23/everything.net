using System;  using System.Collections.Generic;  using System.Text;/*One-line mental modelA delegate is a sealed envelope containing:“Call THIS method”S“On THAT object”The event just keeps a list of these envelopes.  */namespace EventExample  {    public class Program {                                                                                                      // 1. Define the Delegate for the event                                                                                    // This is the "contract". Any method that wants to subscribe to our event                                                 // must match this signature (it takes a string message).                                                                  public delegate void ThresholdReachedEventHandler(string message);                                                                                                                                                                                    // 2. The Publisher Class                                                                                                  // This class has the event and decides when to raise it.                                                                  public class Counter                                                                                                       {                                                                                                                                                                                                // 3. Define the Event                                                                                                     // This is the protected "list of subscribers". Notice the 'event' keyword.                                                public event ThresholdReachedEventHandler ThresholdReached;                                                                                                                                                                                                                                                                  private int _count;                                                                                                        private readonly int _threshold;                                                                                                                                                                                                                      public Counter(int threshold)                                                                                              {			            _threshold = threshold;                                                                                                    _count = 0;                                                                                                            }                                                                                                                          /// <summary>                                                                                                              /// The main entry point for the application.                                                                              /// </summary>                                                                                                                                                                                                                                        public void Increment()                                                                                                    {                                                                                                                              _count++;                                                                                                                  Console.WriteLine($"Count is now: {_count}");                                                                                                                                                                                                         if (_count >= _threshold)                                                                                                  {                                                                                                                              // 4. Raise the Event                                                                                                      // Check if anyone is subscribed before raising the event.                                                                 // This sends the notification to everyone on the list.                                                                    OnThresholdReached($"Threshold of {_threshold} was reached.");                                                         }                                                                                                                      }                                                                                                                                                                                                                                                     protected virtual void OnThresholdReached(string message)                                                                  {                                                                                                                              // The '?' is a null-conditional check. It's a safe way to see if the event has any subscribers.                           // If ThresholdReached is not null, its Invoke method is called.                                                           ThresholdReached?.Invoke(message);                                                                                     }                                                                                                                      }                                                                                                                                                                                                                                                     // 5. The Subscriber Class                                                                                                 // This class is interested in the event from the Counter.                                                                 public class Subscriber                                                                                                    {                  		private string _name;		public Subscriber(string name){			_name = name;		}        public void Subscribe(Counter counter)                                                                                     {                                                                                                                              // 6. Subscribe to the event using the '+=' operator.                                                                      // We are adding our 'HandleThresholdReached' method to the Counter's list.                                                counter.ThresholdReached += HandleThresholdReached;                                                                        Console.WriteLine("Subscriber has subscribed to the counter.");                                                        }                                                                                                                                                                                                                                                     public void Unsubscribe(Counter counter)                                                                                   {                                                                                                                              // You can also unsubscribe using the '-=' operator.                                                           				counter.ThresholdReached -= HandleThresholdReached;                                                                        Console.WriteLine("Subscriber has unsubscribed.");                                                                     }                                                                                                                                                                                                                                                     // 7. The Event Handler                                                                                                    // This method matches the delegate's signature. It's our "reaction".                                                      private void HandleThresholdReached(string message)                                                                        {                                                                                                                              Console.ForegroundColor = ConsoleColor.Green;                                                                              Console.WriteLine($"EVENT RECEIVED FROM {_name}: {message}");                                                                           Console.ResetColor();     			        }                                                                                                                      }		public static void Main(){			Counter counterabc = new Counter(5);			Subscriber sb1 = new Subscriber("devam");			Subscriber sb2 = new Subscriber("hello");						sb1.Subscribe(counterabc);			sb2.Subscribe(counterabc);						/*Internally:				ThresholdReached →			  [				(sb1, HandleThresholdReached),				(sb2, HandleThresholdReached)			  ]  			*/			counterabc.Increment();			counterabc.Increment();			counterabc.Increment();			counterabc.Increment();			counterabc.Increment();			Console.WriteLine("MAIN METHOD cALLED");		}}}